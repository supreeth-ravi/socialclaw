<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialClaw</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        surface: '#1e1e2e',
                        panel: '#262637',
                        border: '#363649',
                        muted: '#9ca3af',
                    }
                }
            }
        }
    </script>
</head>
<body class="h-full bg-surface text-gray-200 font-sans">
    <div class="h-full flex flex-col">
        <!-- Header -->
        <header class="flex items-center justify-between px-5 py-3 border-b border-border bg-panel">
            <h1 class="text-lg font-bold text-white tracking-tight">SocialClaw</h1>
            <button id="new-chat-btn" class="bg-primary hover:bg-indigo-500 text-white text-sm px-4 py-1.5 rounded-lg transition">+ New Chat</button>
        </header>

        <!-- Main layout -->
        <div class="flex-1 flex overflow-hidden">
            <!-- Left: Sessions -->
            <aside id="sessions-panel" class="w-60 border-r border-border bg-panel flex flex-col overflow-hidden">
                <div class="px-4 py-3 border-b border-border">
                    <h2 class="text-xs uppercase tracking-wider text-muted font-semibold">Sessions</h2>
                </div>
                <div id="sessions-list" class="flex-1 overflow-y-auto p-2 space-y-1"></div>
            </aside>

            <!-- Center: Chat -->
            <main class="flex-1 flex flex-col overflow-hidden">
                <!-- Chat header -->
                <div id="chat-header" class="px-5 py-3 border-b border-border bg-panel">
                    <span class="text-sm text-muted">Select or create a chat session</span>
                </div>

                <!-- Messages -->
                <div id="chat-messages" class="flex-1 overflow-y-auto p-5 space-y-4"></div>

                <!-- Input -->
                <div class="p-4 border-t border-border bg-panel">
                    <form id="chat-form" class="flex gap-3">
                        <input id="chat-input" type="text" placeholder="Type a message..."
                            class="flex-1 bg-surface border border-border rounded-lg px-4 py-2.5 text-sm focus:ring-1 focus:ring-primary outline-none"
                            disabled>
                        <button type="submit" id="send-btn"
                            class="bg-primary hover:bg-indigo-500 disabled:opacity-40 text-white text-sm px-5 py-2.5 rounded-lg transition"
                            disabled>Send</button>
                    </form>
                </div>
            </main>

            <!-- Right: Contacts -->
            <aside id="contacts-panel" class="w-72 border-l border-border bg-panel flex flex-col overflow-hidden">
                <div class="px-4 py-3 border-b border-border flex items-center justify-between">
                    <h2 class="text-xs uppercase tracking-wider text-muted font-semibold">Contacts</h2>
                    <button id="invite-btn" class="text-xs text-primary hover:text-indigo-400 transition">+ Invite</button>
                </div>
                <div id="contacts-list" class="flex-1 overflow-y-auto p-3 space-y-4"></div>
            </aside>
        </div>
    </div>

    <!-- Invite Modal -->
    <div id="invite-modal" class="fixed inset-0 bg-black/60 hidden items-center justify-center z-50">
        <div class="bg-panel rounded-xl border border-border p-6 w-96 shadow-2xl">
            <h3 class="text-lg font-semibold mb-4">Invite Agent by URL</h3>
            <input id="invite-url" type="text" placeholder="https://example.com/.well-known/agent-card.json"
                class="w-full bg-surface border border-border rounded-lg px-4 py-2.5 text-sm focus:ring-1 focus:ring-primary outline-none mb-4">
            <div id="invite-preview" class="hidden mb-4 p-3 bg-surface rounded-lg text-sm"></div>
            <div id="invite-error" class="hidden mb-4 text-red-400 text-sm"></div>
            <div class="flex justify-end gap-2">
                <button id="invite-cancel" class="px-4 py-2 text-sm text-muted hover:text-white transition">Cancel</button>
                <button id="invite-confirm" class="bg-primary hover:bg-indigo-500 text-white text-sm px-4 py-2 rounded-lg transition">Invite</button>
            </div>
        </div>
    </div>

    <!-- Agent Card Modal -->
    <div id="agent-card-modal" class="fixed inset-0 bg-black/60 hidden items-center justify-center z-50">
        <div class="bg-panel rounded-xl border border-border p-6 w-[480px] max-h-[80vh] overflow-y-auto shadow-2xl">
            <div class="flex items-center justify-between mb-4">
                <h3 id="agent-card-title" class="text-lg font-semibold"></h3>
                <button id="agent-card-close" class="text-muted hover:text-white text-xl leading-none">&times;</button>
            </div>
            <div id="agent-card-loading" class="hidden flex items-center gap-2 text-muted text-sm py-8 justify-center">
                <div class="spinner"></div> Loading agent card...
            </div>
            <div id="agent-card-error" class="hidden text-red-400 text-sm py-4 text-center"></div>
            <div id="agent-card-content" class="hidden space-y-4">
                <div>
                    <div class="text-xs uppercase tracking-wider text-muted font-semibold mb-1">Description</div>
                    <p id="agent-card-desc" class="text-sm text-gray-300"></p>
                </div>
                <div>
                    <div class="text-xs uppercase tracking-wider text-muted font-semibold mb-1">Endpoint</div>
                    <p id="agent-card-url" class="text-sm text-indigo-300 font-mono break-all"></p>
                </div>
                <div>
                    <div class="text-xs uppercase tracking-wider text-muted font-semibold mb-1">Version</div>
                    <p id="agent-card-version" class="text-sm text-gray-300"></p>
                </div>
                <div id="agent-card-skills-section">
                    <div class="text-xs uppercase tracking-wider text-muted font-semibold mb-2">Skills</div>
                    <div id="agent-card-skills" class="space-y-2"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
